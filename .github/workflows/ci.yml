name: CI

on:
  - pull_request
  - push

jobs:
  build:
    name: Install, build, test on ${{matrix.os}}
    runs-on: ${{matrix.os}}
    strategy:
      matrix:
        os:
          - ubuntu-latest
          - windows-latest
          - macos-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Run npm
        run: |
          npm install
          npm run all
  run:
    name: Deploy ${{matrix.ext}} on ${{matrix.os}}
    runs-on: ${{matrix.os}}
    strategy:
      matrix:
        os:
          - ubuntu-latest
          - windows-latest
          - macos-latest
        ext:
          - .zip
          - .tar.gz
    steps:
      - name: Deploy ${{matrix.ext}}
        uses: Alex079/setup-custom-tool@${{github.sha}}
        with: 
          archiveUrl: https://github.com/Alex079/setup-custom-tool/wiki/sample/content${{matrix.ext}}
          archiveGlob: '*'
